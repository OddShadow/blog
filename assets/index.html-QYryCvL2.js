import{_ as s,c as n,o as a,a as e}from"./app-93bFMtrD.js";const p={},l=e(`<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>FRP（Fast Reverse Proxy）是一个开源的高性能反向代理服务器，主要用于内网穿透。<br> 它允许内网服务通过简单的配置与公网通信，解决了内网服务由于NAT或防火墙限制无法直接被外网访问的问题。</p><h3 id="工作原理" tabindex="-1"><a class="header-anchor" href="#工作原理"><span>工作原理</span></a></h3><p>FRP 主要由两个部分组成，服务端 <code>frps</code> 和 客户端 <code>frpc</code></p><ul><li>服务端 frps 部署在具有公网 IP 地址的服务器上，负责接受来自客户端的连接请求，转发数据。</li><li>客户端 frpc 部署在内网环境中，负责将内网服务注册到服务端，处理服务端转发的请求。</li></ul><h3 id="软件下载" tabindex="-1"><a class="header-anchor" href="#软件下载"><span>软件下载</span></a></h3><p>FRP 项目 github 地址 https://github.com/fatedier/frp<br> 本文使用 0.59.0 版本，支持 windows，linux，mac 系统，https://github.com/fatedier/frp/releases/tag/v0.59.0<br> 无论哪个版本文件目录格式都是</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">frp</span>
<span class="line">├── frpc <span class="token comment"># 客户端执行文件</span></span>
<span class="line">├── frpc.toml <span class="token comment"># 客户端配置文件</span></span>
<span class="line">├── frps <span class="token comment"># 服务端执行文件</span></span>
<span class="line">├── frps.toml <span class="token comment"># 服务端端配置文件</span></span>
<span class="line">└── LICENSE</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一般一台机器只作为服务端或者客户端中一个，所以可以删除不需要的执行文件和配置文件<br> 老版本的 frp 使用的是 ini 格式，新版本使用的是 toml 格式，注意文件格式和参数名的变化<br> 在地址 https://github.com/fatedier/frp/tree/v0.59.0/conf 可以看到 ini 和 toml 所有可配置项</p><h2 id="win10-远程桌面控制内网穿透" tabindex="-1"><a class="header-anchor" href="#win10-远程桌面控制内网穿透"><span>win10 远程桌面控制内网穿透</span></a></h2><p>远程桌面 Microsoft Remote Desktop 应该是微软最良心的软件<br> win10 一般自带客户端，可以通过 <code>win + r</code>，输入 <code>mstsc</code>，快速打开<br> macOS 提供了客户端，Microsoft Remote Desktop<br> Android 提供了客户端，Microsoft Remote Desktop<br> 当然这些客户端是用于控制端，被控端只能是开启了远程控制功能的 windows 电脑</p><h3 id="局域网内使用" tabindex="-1"><a class="header-anchor" href="#局域网内使用"><span>局域网内使用</span></a></h3><p>先在局域网尝试使用远程桌面控制，保证使用没有问题</p><p>局域网内，想要控制 windows 电脑 A</p><ol><li>首先开启 win10 远程控制</li><li>查看内网 IP，比如 192.168.1.100，rdp 默认端口 3389</li></ol><p>另一台 windows 电脑控制电脑 A 步骤</p><ol><li>快捷键 <code>win + r</code>，输入 <code>mstsc</code></li><li>输入电脑 A 内网 IP，<code>192.168.1.100</code></li><li>输入登陆账号和密码，如果登录了微软账号，需要使用微软账号密码</li><li>访问成功表示电脑 A 的内网远程控制没有问题</li></ol><h3 id="使用-frp-提供内网穿透" tabindex="-1"><a class="header-anchor" href="#使用-frp-提供内网穿透"><span>使用 frp 提供内网穿透</span></a></h3><h4 id="部署服务端" tabindex="-1"><a class="header-anchor" href="#部署服务端"><span>部署服务端</span></a></h4><p>部署服务端 frps，首先需要一台公网服务器，比如一台某云上的公网服务器，安装的是 debian12 系统，假设公网 IP <code>8.8.8.8</code></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">cd</span> /tmp</span>
<span class="line"><span class="token function">wget</span> https://github.com/fatedier/frp/releases/download/v0.59.0/frp_0.59.0_linux_amd64.tar.gz</span>
<span class="line"><span class="token comment"># wget -e &quot;https_proxy=http://192.168.1.3:7890&quot; https://github.com/fatedier/frp/releases/download/v0.59.0/frp_0.59.0_linux_amd64.tar.gz</span></span>
<span class="line"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> frp_0.59.0_linux_amd64.tar.gz</span>
<span class="line"><span class="token function">mv</span> frp_0.59.0_linux_amd64 /usr/local/frps</span>
<span class="line"><span class="token function">rm</span> <span class="token parameter variable">-f</span> /usr/local/frps/frpc*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改 frps.toml <code>vim /usr/local/frps/frps.toml</code> 配置文件如下</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml" data-title="toml"><pre><code><span class="line"><span class="token key property">bindPort</span> <span class="token punctuation">=</span> <span class="token number">7000</span></span>
<span class="line"><span class="token key property">auth.token</span> <span class="token punctuation">=</span> <span class="token string">&quot;输入你的随机字符密钥&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>开放云服务器的 7000 端口用于 frps 服务，通过 token 认证<br> 记得开放端口防火墙和云服务器防火墙</p><p>启动服务端<br><code>/usr/local/frps/frps -c /usr/local/frps/frps.toml</code></p><h4 id="部署客户端" tabindex="-1"><a class="header-anchor" href="#部署客户端"><span>部署客户端</span></a></h4><p>windows 电脑 A，下载 frp，https://github.com/fatedier/frp/releases/download/v0.59.0/frp_0.59.0_windows_amd64.zip<br> 解压后放入目录，如，<code>D:\\frp\\frp_0.59.0_windows_amd64</code><br> 不需要服务端，删除，frps.exe，frps.toml<br> 修改客户端配置文件 frpc.toml</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml" data-title="toml"><pre><code><span class="line"><span class="token key property">serverAddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;8.8.8.8&quot;</span> <span class="token comment"># 公网服务器IP地址</span></span>
<span class="line"><span class="token key property">serverPort</span> <span class="token punctuation">=</span> <span class="token number">7000</span> <span class="token comment"># 公网服务器 frps 端口</span></span>
<span class="line"><span class="token key property">auth.token</span> <span class="token punctuation">=</span> <span class="token string">&quot;输入你的随机字符密钥&quot;</span> <span class="token comment"># 认证密钥</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">proxies</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;001-rdp&quot;</span> <span class="token comment"># 名称，随意</span></span>
<span class="line"><span class="token key property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp&quot;</span></span>
<span class="line"><span class="token key property">localIP</span> <span class="token punctuation">=</span> <span class="token string">&quot;127.0.0.1&quot;</span></span>
<span class="line"><span class="token key property">localPort</span> <span class="token punctuation">=</span> <span class="token number">3389</span> <span class="token comment"># 映射出远程桌面端口 3389</span></span>
<span class="line"><span class="token key property">remotePort</span> <span class="token punctuation">=</span> <span class="token number">50000</span> <span class="token comment"># 告诉服务器开放 50000 端口映射到本机 3389 端口</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>开放云服务器的 50000 端口用于连接本机 3389 端口</p><p>启动客户端<br><code>win + r</code>，输入 <code>cmd</code><br><code>cd D:\\frp\\frp_0.59.0_windows_amd64</code><br><code>./frpc -c ./frpc.toml</code></p><h4 id="远程访问" tabindex="-1"><a class="header-anchor" href="#远程访问"><span>远程访问</span></a></h4><p>任意客户端可以尝试连接<br> 另一台 windows <code>win + r</code> <code>mstsc</code>，输入 <code>8.8.8.8:60000</code>，输入账号密码即可连接</p><p>注意事项，需要开放 frp 的 7000 端口 和 映射出去的 50000 端口防火墙<br> 但是云服务器的映射端口暴露很容易被攻击，曾经对公网开放几天，被暴力尝试，建议设定指定 IP 白名单<br> 另外，文件的传输速度受限于公网服务器的水管速度</p><h3 id="使用-xtcp-提供内网穿透" tabindex="-1"><a class="header-anchor" href="#使用-xtcp-提供内网穿透"><span>使用 xtcp 提供内网穿透</span></a></h3><p>frp 提供了 xtcp，P2P 的点对点传输，传输速度不受限于公网服务器水管速度，极大提升远程桌面体验<br> 但是控制端也需要部署 frpc，并且对一些网络环境不适用</p><p>公网服务器配置如下</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml" data-title="toml"><pre><code><span class="line"><span class="token key property">bindPort</span> <span class="token punctuation">=</span> <span class="token number">7000</span></span>
<span class="line"><span class="token key property">kcpBindPort</span> <span class="token punctuation">=</span> <span class="token number">7000</span></span>
<span class="line"><span class="token key property">auth.token</span> <span class="token punctuation">=</span> <span class="token string">&quot;输入你的随机字符密钥&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>被控客户端配置文件 frpc.toml<br> 001-rdp 的配置可以删除，可以保留<br> 保留的原因是如果用安卓手机控制，手机端无法部署 frpc，只能用 001-rdp 的方式<br> 最新版本已经可以支持安卓</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml" data-title="toml"><pre><code><span class="line"><span class="token key property">serverAddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;8.8.8.8&quot;</span> <span class="token comment"># 公网 IP</span></span>
<span class="line"><span class="token key property">serverPort</span> <span class="token punctuation">=</span> <span class="token number">7000</span> <span class="token comment"># 公网服务端端口</span></span>
<span class="line"><span class="token key property">auth.token</span> <span class="token punctuation">=</span> <span class="token string">&quot;输入你的随机字符密钥&quot;</span> <span class="token comment"># 认证密钥</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">proxies</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;001-rdp&quot;</span> <span class="token comment"># 名称，随意</span></span>
<span class="line"><span class="token key property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp&quot;</span></span>
<span class="line"><span class="token key property">localIP</span> <span class="token punctuation">=</span> <span class="token string">&quot;127.0.0.1&quot;</span></span>
<span class="line"><span class="token key property">localPort</span> <span class="token punctuation">=</span> <span class="token number">3389</span> </span>
<span class="line"><span class="token key property">remotePort</span> <span class="token punctuation">=</span> <span class="token number">50000</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">proxies</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;001-rdp-stcp&quot;</span> <span class="token comment"># 名称，随意</span></span>
<span class="line"><span class="token key property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;xtcp&quot;</span></span>
<span class="line"><span class="token key property">secretKey</span> <span class="token punctuation">=</span> <span class="token string">&quot;一串用于连接该服务的随机字符密钥&quot;</span></span>
<span class="line"><span class="token key property">localIP</span> <span class="token punctuation">=</span> <span class="token string">&quot;127.0.0.1&quot;</span></span>
<span class="line"><span class="token key property">localPort</span> <span class="token punctuation">=</span> <span class="token number">3389</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制端客户端配置文件 frpc.toml</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml" data-title="toml"><pre><code><span class="line"><span class="token key property">serverAddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;8.8.8.8&quot;</span></span>
<span class="line"><span class="token key property">serverPort</span> <span class="token punctuation">=</span> <span class="token number">7000</span></span>
<span class="line"><span class="token key property">auth.token</span> <span class="token punctuation">=</span> <span class="token string">&quot;输入你的随机字符密钥&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">visitors</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># 注意</span></span>
<span class="line"><span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;001-rdp-stcp-visitor&quot;</span> <span class="token comment"># 名称，随意</span></span>
<span class="line"><span class="token key property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;xtcp&quot;</span></span>
<span class="line"><span class="token key property">serverName</span> <span class="token punctuation">=</span> <span class="token string">&quot;001-rdp-stcp&quot;</span> <span class="token comment"># 与被控端一致</span></span>
<span class="line"><span class="token key property">secretKey</span> <span class="token punctuation">=</span> <span class="token string">&quot;一串用于连接该服务的随机字符密钥&quot;</span> <span class="token comment"># 与被控端一致</span></span>
<span class="line"><span class="token key property">bindAddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;127.0.0.1&quot;</span></span>
<span class="line"><span class="token key property">bindPort</span> <span class="token punctuation">=</span> <span class="token number">50000</span> <span class="token comment"># 本地使用端口，记得检查没有端口冲突</span></span>
<span class="line"><span class="token key property">keepTunnelOpen</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制端尝试连接<br> 一台 windows <code>win + r</code> <code>mstsc</code>，输入 <code>127.0.0.1:50000</code>，输入账号密码即可连接</p><h2 id="可选配置项" tabindex="-1"><a class="header-anchor" href="#可选配置项"><span>可选配置项</span></a></h2><p>注意选择对应版本号<br><code>./frpc verify -c ./frpc.toml</code> 验证配置文件正确性<br><code>./frps verify -c ./frps.toml</code> 验证配置文件正确性</p><p>https://github.com/fatedier/frp/blob/dev/conf/frps_full_example.toml</p><p>https://github.com/fatedier/frp/blob/dev/conf/frpc_full_example.toml</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml" data-title="toml"><pre><code><span class="line"><span class="token comment"># 日志输出，frpc 同理</span></span>
<span class="line"><span class="token key property">log.to</span> <span class="token punctuation">=</span> <span class="token string">&quot;./logs/frps.log&quot;</span> <span class="token comment"># console or real logFile path</span></span>
<span class="line"><span class="token key property">log.level</span> <span class="token punctuation">=</span> <span class="token string">&quot;info&quot;</span> <span class="token comment"># trace, debug, info, warn, error</span></span>
<span class="line"><span class="token key property">log.maxDays</span> <span class="token punctuation">=</span> <span class="token number">3</span> <span class="token comment"># 最大天数</span></span>
<span class="line"><span class="token key property">log.disablePrintColor</span> <span class="token punctuation">=</span> <span class="token boolean">false</span> <span class="token comment"># 控制台输出日志时是否禁用彩色输出</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>进入目录 <code>/usr/local/frps</code> 执行 <code>./frps -c ./frps.toml &amp;</code> 即可</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml" data-title="toml"><pre><code><span class="line"><span class="token comment"># 网页端 Dashboard</span></span>
<span class="line"><span class="token key property">webServer.addr</span> <span class="token punctuation">=</span> <span class="token string">&quot;127.0.0.1&quot;</span> <span class="token comment"># 非本机访问可以修改成 &quot;0.0.0.0&quot;</span></span>
<span class="line"><span class="token key property">webServer.port</span> <span class="token punctuation">=</span> <span class="token number">7500</span></span>
<span class="line"><span class="token key property">webServer.user</span> <span class="token punctuation">=</span> <span class="token string">&quot;admin&quot;</span> <span class="token comment"># 账号密码</span></span>
<span class="line"><span class="token key property">webServer.password</span> <span class="token punctuation">=</span> <span class="token string">&quot;admin&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># prometheus 监控数据</span></span>
<span class="line"><span class="token comment"># 地址 http://{dashboard_addr}/metrics</span></span>
<span class="line"><span class="token comment"># 只支持 frps</span></span>
<span class="line"><span class="token key property">enablePrometheus</span> <span class="token punctuation">=</span> <span class="token boolean">true</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以使用 systemd 管理</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># /lib/systemd/system/frps.service</span></span>
<span class="line"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">Description</span><span class="token operator">=</span>FRP Server Daemon</span>
<span class="line"><span class="token assign-left variable">After</span><span class="token operator">=</span>network.target</span>
<span class="line"><span class="token assign-left variable">Wants</span><span class="token operator">=</span>network.target</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>Service<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">Type</span><span class="token operator">=</span>simple</span>
<span class="line"><span class="token comment"># 注意修改路径</span></span>
<span class="line"><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/frps/frps <span class="token parameter variable">-c</span> /usr/local/frps/frps.toml</span>
<span class="line"><span class="token assign-left variable">Restart</span><span class="token operator">=</span>always</span>
<span class="line"><span class="token assign-left variable">RestartSec</span><span class="token operator">=</span>20s</span>
<span class="line"><span class="token assign-left variable">User</span><span class="token operator">=</span>nobody</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>Install<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># /lib/systemd/system/frpc.service</span></span>
<span class="line"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">Description</span><span class="token operator">=</span>FRP Client Daemon</span>
<span class="line"><span class="token assign-left variable">After</span><span class="token operator">=</span>network.target</span>
<span class="line"><span class="token assign-left variable">Wants</span><span class="token operator">=</span>network.target</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>Service<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">Type</span><span class="token operator">=</span>simple</span>
<span class="line"><span class="token comment"># 注意修改路径</span></span>
<span class="line"><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/frp/frpc <span class="token parameter variable">-c</span> /usr/local/frp/frpc.toml</span>
<span class="line"><span class="token assign-left variable">Restart</span><span class="token operator">=</span>always</span>
<span class="line"><span class="token assign-left variable">RestartSec</span><span class="token operator">=</span>20s</span>
<span class="line"><span class="token assign-left variable">User</span><span class="token operator">=</span>nobody</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>Install<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 如果配置成 systemd 服务，需要掌握的一些常用命令</span></span>
<span class="line"><span class="token comment"># 日志被 journal 代理，没找到存两份的方法，可以不用在 toml 中配置</span></span>
<span class="line"><span class="token comment"># 使用 systemd 启动，如果已经用 ./frps -c ./frps.toml &amp; 启动，记得 kill</span></span>
<span class="line"></span>
<span class="line">systemctl status frps <span class="token comment"># 状态</span></span>
<span class="line">systemctl start frps <span class="token comment"># 启动</span></span>
<span class="line">systemctl stop frps <span class="token comment"># 停止</span></span>
<span class="line">systemctl <span class="token builtin class-name">enable</span> frps <span class="token comment"># 开机自启</span></span>
<span class="line">systemctl disable frps <span class="token comment"># 禁止开机自启</span></span>
<span class="line">systemctl restart frps <span class="token comment"># 重启</span></span>
<span class="line">systemctl daemon-reload <span class="token comment"># 重载 frps.service 配置文件</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># frp 自带日志失效，被 journal 管理</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps</span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">-f</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">-r</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 从某时间开始，默认时分秒 00:00:00</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">--since</span> <span class="token string">&#39;2000-01-01&#39;</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">-S</span> <span class="token string">&#39;2000-01-01&#39;</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">--since</span> <span class="token string">&#39;2000-01-01 12:01:01&#39;</span></span>
<span class="line"><span class="token comment"># 截止某时间结束，默认时分秒 00:00:00</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">--until</span> <span class="token string">&#39;2050-01-01&#39;</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">-U</span> <span class="token string">&#39;2050-01-01&#39;</span></span>
<span class="line">journalctl <span class="token parameter variable">-u</span> frps <span class="token parameter variable">--until</span> <span class="token string">&#39;2050-01-01 12:01:01&#39;</span></span>
<span class="line"><span class="token comment"># 可以不写日期，默认当天，可以一起使用，还可以用 yesterday today</span></span>
<span class="line"></span>
<span class="line">journalctl --disk-usage <span class="token comment"># 查看日志大小</span></span>
<span class="line">journalctl --vacuum-time<span class="token operator">=</span>30d <span class="token comment"># 清理30天之前的日志</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="windows-一般利用任务计划程序设置开机自启动" tabindex="-1"><a class="header-anchor" href="#windows-一般利用任务计划程序设置开机自启动"><span>windows 一般利用任务计划程序设置开机自启动</span></a></h2><p>有时间再补充</p>`,55),t=[l];function i(c,o){return a(),n("div",null,t)}const d=s(p,[["render",i],["__file","index.html.vue"]]),u=JSON.parse('{"path":"/article/xsvrvxlc/","title":"frp","lang":"zh-CN","frontmatter":{"title":"frp","author":null,"createTime":"2024/08/12 10:22:36","permalink":"/article/xsvrvxlc/"},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[{"level":3,"title":"工作原理","slug":"工作原理","link":"#工作原理","children":[]},{"level":3,"title":"软件下载","slug":"软件下载","link":"#软件下载","children":[]}]},{"level":2,"title":"win10 远程桌面控制内网穿透","slug":"win10-远程桌面控制内网穿透","link":"#win10-远程桌面控制内网穿透","children":[{"level":3,"title":"局域网内使用","slug":"局域网内使用","link":"#局域网内使用","children":[]},{"level":3,"title":"使用 frp 提供内网穿透","slug":"使用-frp-提供内网穿透","link":"#使用-frp-提供内网穿透","children":[]},{"level":3,"title":"使用 xtcp 提供内网穿透","slug":"使用-xtcp-提供内网穿透","link":"#使用-xtcp-提供内网穿透","children":[]}]},{"level":2,"title":"可选配置项","slug":"可选配置项","link":"#可选配置项","children":[]},{"level":2,"title":"windows 一般利用任务计划程序设置开机自启动","slug":"windows-一般利用任务计划程序设置开机自启动","link":"#windows-一般利用任务计划程序设置开机自启动","children":[]}],"git":{"updatedTime":1723721452000,"contributors":[{"name":"Rick","email":"mymiaojirui@gmail.com","commits":1}]},"filePathRelative":"others/frp.md"}');export{d as comp,u as data};
